<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Dashboard interactivo para gestiÃ³n de finanzas personales">
  <title>Finance Dashboard | GestiÃ³n de Finanzas Personales</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">$</div>
        <span>Finance Dashboard</span>
      </div>
      <div class="header-actions">
        <button class="btn btn-secondary btn-icon" id="exportBtn" title="Exportar datos">
          ðŸ“Š
        </button>
        <button class="btn btn-secondary btn-icon" id="themeToggle" title="Cambiar tema">
          ðŸŒ™
        </button>
      </div>
    </div>
  </header>

  <!-- Contenido principal -->
  <div class="container">
    <!-- Panel de KPIs -->
    <div class="kpi-grid">
      <div class="kpi-card">
        <div class="kpi-label">Ingresos del mes</div>
        <div class="kpi-value positive" id="totalIncome">$0.00</div>
        <div class="kpi-change">---</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Gastos del mes</div>
        <div class="kpi-value negative" id="totalExpenses">$0.00</div>
        <div class="kpi-change">---</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Balance neto</div>
        <div class="kpi-value" id="netBalance">$0.00</div>
        <div class="kpi-change">---</div>
      </div>
      <div class="kpi-card">
        <div class="kpi-label">Tasa de ahorro</div>
        <div class="kpi-value" id="savingsRate">0%</div>
        <div class="kpi-change">Del total de ingresos</div>
      </div>
    </div>

    <!-- GrÃ¡ficos -->
    <div class="charts-grid">
      <div class="chart-card">
        <div class="chart-header">
          <h2 class="chart-title">EvoluciÃ³n del Balance</h2>
        </div>
        <div class="chart-container">
          <canvas id="lineChart"></canvas>
        </div>
      </div>
      <div class="chart-card">
        <div class="chart-header">
          <h2 class="chart-title">Gastos por CategorÃ­a</h2>
        </div>
        <div class="chart-container">
          <canvas id="barChart"></canvas>
        </div>
      </div>
    </div>

    <!-- SecciÃ³n de transacciones -->
    <div class="transactions-section">
      <div class="section-header">
        <h2 class="section-title">Transacciones Recientes</h2>
        <div style="display: flex; gap: var(--spacing-md);">
          <button class="btn btn-secondary" id="importBtn">
            ðŸ“¥ Importar
          </button>
          <button class="btn btn-primary" id="addTransactionBtn">
            âž• Nueva TransacciÃ³n
          </button>
        </div>
      </div>

      <!-- Filtros -->
      <div class="filters">
        <div class="filter-group">
          <label class="filter-label" for="filterType">Tipo</label>
          <select class="select" id="filterType">
            <option value="">Todos</option>
            <option value="ingreso">Ingresos</option>
            <option value="gasto">Gastos</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="filterCategory">CategorÃ­a</label>
          <select class="select" id="filterCategory">
            <option value="">Todas</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="filterDateFrom">Desde</label>
          <input type="date" class="input" id="filterDateFrom">
        </div>
        <div class="filter-group">
          <label class="filter-label" for="filterDateTo">Hasta</label>
          <input type="date" class="input" id="filterDateTo">
        </div>
        <div class="filter-group" style="align-self: flex-end;">
          <button class="btn btn-ghost" id="resetFilters">Limpiar filtros</button>
        </div>
      </div>

      <!-- Lista de transacciones -->
      <div id="transactionsContainer">
        <!-- Se llena dinÃ¡micamente -->
      </div>
    </div>
  </div>

  <!-- Modal para agregar/editar transacciÃ³n -->
  <div class="modal-overlay hidden" id="transactionModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Nueva TransacciÃ³n</h3>
        <button class="btn btn-ghost btn-icon" id="closeModal">âœ•</button>
      </div>
      <div class="modal-body">
        <form id="transactionForm">
          <input type="hidden" id="transactionId">
          
          <div class="form-group">
            <label class="form-label required" for="tipo">Tipo</label>
            <select class="select" id="tipo" required>
              <option value="">Seleccionar...</option>
              <option value="ingreso">Ingreso</option>
              <option value="gasto">Gasto</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label required" for="categoria">CategorÃ­a</label>
            <select class="select" id="categoria" required>
              <option value="">Seleccionar...</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label required" for="monto">Monto</label>
            <input 
              type="number" 
              class="input" 
              id="monto" 
              step="0.01" 
              min="0.01" 
              placeholder="0.00"
              required
            >
            <div class="form-hint">Ingresa el monto sin el sÃ­mbolo de moneda</div>
          </div>

          <div class="form-group">
            <label class="form-label required" for="fecha">Fecha</label>
            <input type="date" class="input" id="fecha" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="descripcion">DescripciÃ³n</label>
            <input 
              type="text" 
              class="input" 
              id="descripcion" 
              maxlength="200"
              placeholder="Ej: Compra de supermercado"
            >
            <div class="form-hint">Opcional, mÃ¡ximo 200 caracteres</div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelBtn">Cancelar</button>
        <button class="btn btn-primary" id="saveBtn">Guardar</button>
      </div>
    </div>
  </div>

  <!-- Modal de confirmaciÃ³n para eliminar -->
  <div class="modal-overlay hidden" id="deleteModal">
    <div class="modal" style="max-width: 400px;">
      <div class="modal-header">
        <h3 class="modal-title">Confirmar EliminaciÃ³n</h3>
        <button class="btn btn-ghost btn-icon" id="closeDeleteModal">âœ•</button>
      </div>
      <div class="modal-body">
        <p>Â¿EstÃ¡s seguro de que deseas eliminar esta transacciÃ³n? Esta acciÃ³n no se puede deshacer.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelDeleteBtn">Cancelar</button>
        <button class="btn btn-danger" id="confirmDeleteBtn">Eliminar</button>
      </div>
    </div>
  </div>

  <!-- BotÃ³n flotante -->
  <button class="fab" id="fabBtn" title="Nueva transacciÃ³n">
    âž•
  </button>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- JavaScript Modules -->
  <script type="module" src="js/app.js"></script>
</body>
</html>